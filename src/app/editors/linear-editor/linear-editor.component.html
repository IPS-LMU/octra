<div style="width:100px;" id="">
    <app-circleloupe #miniloupe [ngStyle]="{
'position':'absolute',
'margin-left':mini_loupecoord.x + 'px',
'margin-top':mini_loupecoord.y + 'px',
'width' : '80px',
'height': '80px',
'z-index':'900',
'visibility': (miniloupe_hidden) ? 'hidden' : 'inherit'}"
                     [audiochunk]="audiochunk_loupe"></app-circleloupe>
</div>
<app-audio-navigation #nav
                      (buttonclick)="onButtonClick($event)"
                      (volumechange)="onVolumeChange($event)"
                      (aftervolumechange)="afterVolumeChange($event)"
                      (speedchange)="onSpeedChange($event)"
                      (afterspeedchange)="afterSpeedChange($event)"
                      [audioplaying]="audiomanager.audioplaying"
                      [(responsive)]="settingsService.responsive.enabled"
                      [buttons]="{
                        play: {
                            label: ('general.play' | translate),
                            shortcut: keyMap.getShortcut('AV', 'play_pause')
                        },
                        pause: {
                            label: ('general.pause' | translate),
                            shortcut: keyMap.getShortcut('AV', 'play_pause')
                        },
                        stop: {
                            label: ('general.stop' | translate),
                            shortcut: keyMap.getShortcut('AV', 'stop')
                        },
                        replay: {
                            label: ('general.replay' | translate),
                            shortcut: ''
                        },
                        backward: {
                            label: ('general.backward' | translate),
                            shortcut: keyMap.getShortcut('AV', 'step_backward')
                        },
                        backwardtime: {
                            label: ('general.backwardtime' | translate),
                            shortcut: keyMap.getShortcut('overlay', 'step_backward')
                        }
                      }"
                      [easymode]="sessService.easymode"
>

</app-audio-navigation>
<div id="viewer">
    <app-audioviewer #viewer (selchange)="test($event)"
                     (segmentchange)="onSegmentChange($event)"
                     (segmententer)="onSegmentEnter($event)"
                     (mousecursorchange)="onMouseOver($event)"
                     (mouseenter)="miniloupe_hidden = false;"
                     (mouseleave)="miniloupe_hidden = true;"
                     (mousedown)="onViewerMouseDown($event)"
                     (shortcuttriggered)="onShortCutTriggered($event, 'signaldisplay_top')"
                     [audiochunk]="audiochunk_top"
    >
    </app-audioviewer>
</div>

<app-loupe #loupe [hidden]="!top_selected"
           [margin]="{
            top:2
           }"
           (segmententer)="onLoupeSegmentEnter($event)"
           (shortcuttriggered)="onShortCutTriggered($event, 'signaldisplay_down')"
           [audiochunk]="audiochunk_down"
>
</app-loupe>
<div *ngIf="!segmentselected" id="editor-placeholder">
    <div *ngIf="!segmentselected && top_selected" class="inner"
         [innerHTML]="'signal-gui.segment enter text' | translate:{value: segmententer_shortc}">
    </div>
    <div *ngIf="!top_selected" class="inner" [innerHTML]="'signal-gui.selection text' | translate">
    </div>
</div>
<app-transcr-editor #transcr
                    (onkeyup)="onTranscriptionChanged($event)"
                    (marker_insert)="onMarkerInsert($event)"
                    (marker_click)="onMarkerClick($event)"
                    (typing)="onEditorTyping($event)"
                    [ngStyle]="{display: (segmentselected) ? 'inherit': 'none'}"
                    [markers]="transcrService.guidelines.markers"
                    [easymode]="sessService.easymode"
                    [audiochunk]="audiochunk_down"
>
</app-transcr-editor>