<div id="overlay-transcr" style="position:relative">
  <app-transcr-window #window (act)="onWindowAction($event)" *ngIf="showWindow"
                      [easymode]="appStorage.easymode"
                      [audiochunk]="audioChunkWindow"
                      [segmentIndex]="selectedIndex"
  ></app-transcr-window>
  <oco-audio-navigation #audionav
                        [audioChunk]="audioChunkLines"
                        (buttonClick)="onButtonClick($event)"
                        (afterVolumeChange)="afterVolumeChange($event)"
                        (afterPlaybackRateChange)="afterSpeedChange($event)"

                        [volume]="appStorage.audioVolume"
                        [playbackRate]="appStorage.audioSpeed"
                        [responsive]="settingsService.responsive.enabled"
                        [buttons]="{
                                play: {
                                    label: ('general.play' | transloco),
                                    shortcut: keyMap.getShortcut('overlay', 'play_pause')
                                },
                                pause: {
                                    label: ('general.pause' | transloco),
                                    shortcut: keyMap.getShortcut('overlay', 'play_pause')
                                },
                                stop: {
                                    label: ('general.stop' | transloco),
                                    shortcut: keyMap.getShortcut('overlay', 'stop')
                                },
                                replay: {
                                    label: ('general.replay' | transloco),
                                    shortcut: ''
                                },
                                backward: {
                                    label: ('general.backward' | transloco),
                                    shortcut: keyMap.getShortcut('overlay', 'step_backward')
                                },
                                backwardtime: {
                                    label: ('general.backwardtime' | transloco),
                                    shortcut: keyMap.getShortcut('overlay', 'step_backward')
                                }
                              }"
                        [easyMode]="appStorage.easymode"
  ></oco-audio-navigation>
  <div *ngIf="appStorage.showLoupe">
    <oco-audio-viewer #loupe
                      (mousemove)="onCircleLoupeMouseOver($event)"
                      [height]="miniloupe.size.height"
                      [ngStyle]="{
        'width': miniloupe.size.width + 'px',
        'height': miniloupe.size.height + 'px',
        'position':'absolute',
        'margin-left':miniloupe.location.x + 'px',
        'margin-top':miniloupe.location.y + 'px',
        'z-index':'90',
        'display': 'flex',
        'visibility': (loupeHidden) ? 'hidden' : 'inherit',
        'flex': 'auto',
        'flex-direction': 'column'}"
                      [audioChunk]="audioChunkLoupe"
                      [transcriptionLevel]="transcrService.currentlevel"
                      [settings]="miniLoupeSettings"
                      [isMultiLine]="false"
                      [breakMarker]="{
                        code: '<P>'
                      }"
                      [name]="'loupe'"
    ></oco-audio-viewer>
  </div>
  <div id="lines-wrapper" #linesView>
    <oco-audio-viewer #viewer id="special"
                      (segmententer)="onSegmentEntered($event)"
                      (mousecursorchange)="onMouseOver($event);"
                      (shortcuttriggered)="onShortCutTriggered($event, 'multi-lines-viewer')"
                      [audioChunk]="audioChunkLines"
                      [isMultiLine]="true"
                      [breakMarker]="{
                        code: '<P>'
                      }"
                      style="height:400px; display: flex; flex: auto; flex-direction: column;"

                      [height]="linesViewHeight"
                      [transcriptionLevel]="transcrService.currentlevel"
    >
    </oco-audio-viewer>
  </div>
</div>
