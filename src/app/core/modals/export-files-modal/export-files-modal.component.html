<div #modal="bs-modal" (onHidden)="onHidden()" aria-labelledby="dialog-sizes-name1" bsModal class="modal fade"
     id="supportedfiles"
     role="dialog" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">{{"general.export data" | transloco}}</h4>
        <button (click)="close()" aria-label="Close" class="close pull-right" type="button">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div #content class="modal-body" id="export-table">
        <table class="table">
          <thead>
          <tr>
            <th></th>
            <th>{{'general.download' | transloco}}</th>
            <th>{{'general.application' | transloco}}</th>
            <th>{{'general.website' | transloco}}</th>
          </tr>
          </thead>
          <tbody>
          <ng-container *ngFor="let converter of converters; let i = index;">
            <tr *ngIf="converter.conversion.export" class="top-tr">
              <td (click)="onLineClick(converter, i)">
                <fa-icon [icon]="['fas', ((exportStates[i] === 'active') ? 'chevron-up' : 'chevron-down')]"
                         style="color:gray;"></fa-icon>
              </td>
              <td (click)="onLineClick(converter, i)">
                <a #a>
                  {{converter.name}} (*{{converter.extension}})
                </a>
                <fa-icon *ngIf="preparing.name === converter.name && preparing.preparing" [spin]="true"
                         icon="spinner"></fa-icon>
              </td>
              <td (click)="onLineClick(converter, i)">
                {{converter.application}}
              </td>
              <td (click)="onLineClick(converter, i)">
                <a href="{{converter.website.url}}" target="_blank">
                  {{converter.website.title}}
                </a>
              </td>
              <td (click)="onLineClick(converter, i)">
                <fa-icon *ngIf="converter.notice !== ''" [tooltip]="converter.notice"
                         icon="info-circle"></fa-icon>
              </td>
            </tr>
            <ng-container *ngIf="converter.conversion.export">
              <tr *ngIf="exportStates[i] === 'active'" [@fadeInExpandOnEnter] [@fadeOutCollapseOnLeave]>
                <td></td>
                <td colspan="4" style="padding-left:20px;">
                  <select #val
                          (change)="onSelectionChange(converter, val.value)"
                          *ngIf="navbarServ.transcrService !== undefined && !converter.multitiers && transcrService.annotation.levels.length > 1">
                    <option value="">{{"general.select one tier" | transloco}}</option>
                    <option *ngFor="let level of navbarServ.transcrService.annotation.levels; let l = index;"
                            value="{{l}}">{{level.name}}
                    </option>
                  </select>

                  <a (click)="onDownloadClick(i)"
                     *ngIf="preparing.name === converter.name && !preparing.preparing"
                     [href]="parentformat.uri" class="link"
                     download="{{parentformat.download}}" style="margin-left:10px;">
                    <fa-icon icon="save"></fa-icon>
                    Download
                  </a>
                </td>
              </tr>
            </ng-container>
          </ng-container>
          </tbody>
        </table>

        <h5>{{"general.custom formats" | transloco}}</h5>
        <table class="table table-striped">
          <thead>
          <tr>
            <th></th>
            <th>{{'general.name' | transloco}}</th>
            <th>{{'general.description' | transloco}}</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td (click)="tools.tableConfigurator.opened = !tools.tableConfigurator.opened">
              <fa-icon [icon]="['fas', ((tools.tableConfigurator.opened) ? 'chevron-up' : 'chevron-down')]"
                       style="color:gray;"></fa-icon>
            </td>
            <td (click)="tools.tableConfigurator.opened = !tools.tableConfigurator.opened">
              <a #a>
                {{'custom.table configurator.name' | transloco}}
              </a>
            </td>
            <td colspan="3">{{'custom.table configurator.description' | transloco}}</td>
          </tr>
          <tr *ngIf="tools.tableConfigurator.opened" [@fadeInExpandOnEnter] [@fadeOutCollapseOnLeave]>
            <td></td>
            <td colspan="4" style="padding-left:20px;">
              <div *ngIf="navbarServ.transcrService !== undefined" class="card" style="padding:10px;">
                <app-table-configurator #tableConfigurator
                                        [annotation]="transcrService.annotation"
                                        [columns]="tools.tableConfigurator.columns"
                                        [currentLevelID]="transcrService.currentlevel.id"
                                        [tableWidth]="content.offsetWidth - 100"
                ></app-table-configurator>
              </div>
            </td>
          </tr>
          </tbody>
        </table>

        <h5>{{"general.meta data" | transloco}}</h5>

        <table class="table table-striped">
          <thead>
          <tr>
            <th style="width:25px;"></th>
            <th>{{'general.name' | transloco}}</th>
            <th>{{'general.description' | transloco}}</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td (click)="getProtocol()">
              <fa-icon [icon]="['fas', ((preparing.name === 'Protocol') ? 'chevron-up' : 'chevron-down')]"
                       style="color:gray;"></fa-icon>
            </td>
            <td (click)="getProtocol()">
              <a #a>
                {{'general.protocol' | transloco}}
              </a>
            </td>
            <td colspan="3">{{'export.meta data.description' | transloco}}</td>
          </tr>
          <tr *ngIf="preparing.name === 'Protocol'" [@fadeInExpandOnEnter] [@fadeOutCollapseOnLeave]>
            <td></td>
            <td colspan="4">
              <i *ngIf="preparing.name === 'Protocol' && preparing.preparing" class="fa fa-spinner fa-spin"></i>
              <a *ngIf="preparing.name === 'Protocol' && !preparing.preparing"
                 [href]="parentformat.uri" class="link"
                 download="{{parentformat.download}}">
                <fa-icon icon="save"></fa-icon>
                Download
              </a>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button (click)="close()" class="btn btn-primary" data-dismiss="modal" type="button">
          {{"general.close" | transloco}}
        </button>
      </div>
    </div>
  </div>
</div>
