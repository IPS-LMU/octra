<octra-drop-zone #dropzone (afterdrop)="afterDrop()" [height]="height">
  <table [hidden]="files.length === 0" class="dropzone-table position-relative">
    @for (file of files; track file) {
    <tr>
      <td class="text-center">
        @if (file.status === 'invalid') {
        <i
          class="bi bi-x-lg icon-invalid"
          [popoverTitle]="'Validation Error'"
          [ngbPopover]="file.error ?? ''"
          [triggers]="'hover'"
          style="font-size: 16px"
          placement="top"
        ></i>
        } @if (file.status === 'valid' && !file.warning) {
        <i class="bi bi-check-lg" style="font-size: 16px"></i>
        } @if (file.status === 'valid' && file.warning) {
        <i
          class="bi bi-exclamation-triangle-fill"
          [popoverTitle]="'Validation Warning'"
          [triggers]="'hover'"
          [ngbPopover]="file.warning"
          style="font-size: 16px; color: orange"
        ></i>
        } @if (file.status === 'waiting') {
        <div
          class="spinner-border icon-wait"
          role="status"
          style="width: 16px; height: 16px; border-width: 2px; color: gray"
        >
          <span class="visually-hidden">Loading...</span>
        </div>
        } @else if (file.name.indexOf(".wav") < 0 && file.status === "progress")
        {
          <div
            class="spinner-border icon-wait"
            role="status"
            style="width: 16px; height: 16px; border-width: 2px; color: gray"
          >
            <span class="visually-hidden">Loading...</span>
          </div>
        } @if ( file.name.indexOf('.wav') > -1 && file.status === 'progress' ) {
        <div class="progress">
          <div
            class="progress-bar"
            role="progressbar"
            style="height: 13px"
            [style.width]="(file.progress | procent) + '%'"
            aria-valuenow="25"
            aria-valuemin="0"
            aria-valuemax="100"
          >
            {{ file.progress | procent }}%
          </div>
        </div>
        }
      </td>
      <td>{{ getDropzoneFileString(file) }}</td>
      <td>
        <i
          class="bi bi-trash3-fill icon-delete"
          (click)="onDeleteEntry(file.name)"
          style="font-size: 14px; color: dimgray"
        ></i>
      </td>
      <td>
        <i
          [ngStyle]="{
            visibility: file.needsOptions ? 'visible' : 'hidden'
          }"
          class="bi bi-gear-wide-connected ms-1"
          (click)="openImportOptionsModal(file)"
          style="font-size: 14px; color: dimgray"
        ></i>
      </td>
    </tr>
    }
  </table>
  @if (files.length === 0) {
  <span class="position-relative">{{
    'dropzone.drag&drop here' | transloco
  }}</span>
  }
</octra-drop-zone>
<div
  (click)="showSupported()"
  class="link"
  style="z-index: 20; width: 100%; text-align: center; height: 30px"
>
  {{ 'g.supported files' | transloco }}
</div>
